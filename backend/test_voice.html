<!DOCTYPE html>
<html>
<head>
    <title>Voice Bot Test</title>
</head>
<body>
    <h1>AI Voice Bot Test</h1>
    <button id="startBtn">üé§ Start Talking</button>
    <button id="stopBtn" disabled>‚èπÔ∏è Stop</button>
    
    <div id="status">Ready to start...</div>
    <div id="transcription"></div>
    <div id="response"></div>
    
    <script>
        // ALL THE JAVASCRIPT CODE GOES HERE!
        let ws;
        let mediaRecorder;
        
        // Connect to WebSocket
        function connectWebSocket() {
            ws = new WebSocket('ws://localhost:8000/ws/voice');
            
            ws.onopen = () => {
                document.getElementById('status').textContent = '‚úÖ Connected!';
            };
            
            ws.onmessage = (event) => {
                const data = JSON.parse(event.data);
                
                if (data.type === 'transcription') {
                    document.getElementById('transcription').textContent = 
                        `You said: ${data.text}`;
                }
                
                if (data.type === 'audio_response') {
                    document.getElementById('response').textContent = 
                        `Bot says: ${data.text}`;
                    // We'll play audio later
                }
            };
        }
        
        // Connect when page loads
        connectWebSocket();
        
        // Add the button click handler here too
        document.getElementById('startBtn').onclick = () => {
            // For testing, send a text message
            ws.send(JSON.stringify({
                type: 'audio',
                audio: [0, 0, 0]  // Fake audio for now
            }));
            
            document.getElementById('status').textContent = 'üé§ Recording...';
        };
    </script>
</body>
</html>